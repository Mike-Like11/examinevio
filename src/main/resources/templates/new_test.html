
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>My first BootstrapVue app</title>
    <link
            type="text/css"
            rel="stylesheet"
            href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css"
    />
    <link
            type="text/css"
            rel="stylesheet"
            href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"
    />
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver"></script>

    <script src="https://unpkg.com/vue@latest/dist/vue.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.min.css" rel="stylesheet">
    <th:block th:include="general.html :: headerfiles"></th:block>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<header th:insert="general.html :: header"> </header>
<div id="app">
    <div class="container" style="margin-top: 10px; margin-bottom: 10px;">
                <div class="registration-form">
                    <form v-on:submit.prevent="postTest">
                        <h3>Новый тест</h3>
                        <div class="form-icon">
                            <span><i class="icon icon-pencil"></i></span>
                        </div>
                        <div class="form-group">
                            <label >Напишите название раздела теста</label>
                            <input type="text" v-model="name_chapter"  class="form-control item" id="chapter_test" placeholder="Название раздела теста">
                        </div>
                        <div class="form-group">
                            <label>Выберите название теста</label>
                            <input type="text" v-model="name" class="form-control item" id="name_test" placeholder="Название теста">
                        </div>
                        <div>
                            <label>Укажите дату тестирования</label>
                            <b-form-datepicker id="example-datepicker" v-model="date" class="mb-2" v::plcd></b-form-datepicker>
                        </div>
                        <div>
                            <label>Укажите продолжительность тестирования в минутах</label>
                            <input type="number" class="form-control item" v-model="time" placeholder="Продолжительность">
                        </div>
                        <div class="form-group">
                            <label>Укажите количество вопросов</label>
                            <b-form-spinbutton id="demo-sb" v-model="value" min="1" max="100"></b-form-spinbutton>
                        </div>
                        <div class="form-group">
                            <input type="submit" class="btn btn-block create-account" value="Создать тест">
                        </div>
                    </form>
                </div>
    </div>
</div>

<!-- Start running your app -->
<script>
    window.app = new Vue({
        el: '#app',
        data: {
            value: '',
            date: '',
            name_chapter: '',
            name: '',
            time:''
        },
        methods: {
            postTest: function (event) {
                axios
                    .post("/add_test", {
                        "name_test": this.name,
                        "name_chapter":this.name_chapter,
                        "date":this.date,
                        "question_number":this.value,
                        "time":this.time
                    }).
                    then(function (response){
                    window.location.href = "/test_edit/"+response.data
                })
            }
        }
    })
</script>
</body>
</html>
